var t={d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)},n={};t.d(n,{ty:()=>R,ge:()=>Gr,fY:()=>dt,mR:()=>jr,iC:()=>z,mE:()=>Jr,cV:()=>Ft,tp:()=>et});const e=new Function("try {return this===window;}catch(e){ return false;}")()?function(t){const n=window.atob(t),e=n.length,r=new Uint8Array(e);for(let t=0;t<e;t++)r[t]=n.charCodeAt(t);return r.buffer}:function(t){return function(t){const n=new ArrayBuffer(t.length),e=new Uint8Array(n);for(let n=0;n<t.length;++n)e[n]=t[n];return n}(Buffer.from(t,"base64"))},r=e("AGFzbQEAAAABBgFgAX8BfAMDAgAABQMBAAAHHwMGbWVtb3J5AgAHc3F1YXJlcwAACHNxdWFyZXM0AAEKjgECPwECfiAArULHuuXf9tjQm2p+IgEgASABfnxCIIoiAiACfiABQse65d/22NCbanx8QiCKIgIgAn4gAXxCIIi6C0wBAn4gAK1Cx7rl3/bY0JtqfiIBQse65d/22NCbanwiAiABIAIgASABIAF+fEIgiiIBIAF+fEIgiiIBIAF+fEIgiiIBIAF+fEIgiLoL"),o=new WebAssembly.Module(r),i=new WebAssembly.Instance(o),s=i.exports.squares;function u(t){if(void 0===t)return[];const n=[t];let e=t.next;for(;e!==t;)n.push(e),e=e.next;return n}function c(t,n){const e=t.next,r={r:n,next:e,prev:t};return t.next=r,void 0!==e&&(e.prev=r),r}function l(t,n,e){const r=void 0!==e?t.findIndex((t=>e(t,n))):t.indexOf(n);return-1!==r&&t.splice(r,1),t}function f(t,n,e){for(let r=0;r<3;r++){const o=n[e+r];l(t.get(o),e)}}function h(t,n,e,r){const o=t[n+0],i=t[n+1],s=t[n+2];return o===e||o===r?i===e||i===r?s:i:o}function a(t,n,e){return function(t,n){for(const e of t)for(const t of n)if(e===t)return e}(t.get(n),t.get(e))}i.exports.squares4;const g=134217729;function d(t,n,e,r,o){let i,s,u,c,l=n[0],f=r[0],h=0,a=0;f>l==f>-l?(i=l,l=n[++h]):(i=f,f=r[++a]);let g=0;if(h<t&&a<e)for(f>l==f>-l?(s=l+i,u=i-(s-l),l=n[++h]):(s=f+i,u=i-(s-f),f=r[++a]),i=s,0!==u&&(o[g++]=u);h<t&&a<e;)f>l==f>-l?(s=i+l,c=s-i,u=i-(s-c)+(l-c),l=n[++h]):(s=i+f,c=s-i,u=i-(s-c)+(f-c),f=r[++a]),i=s,0!==u&&(o[g++]=u);for(;h<t;)s=i+l,c=s-i,u=i-(s-c)+(l-c),l=n[++h],i=s,0!==u&&(o[g++]=u);for(;a<e;)s=i+f,c=s-i,u=i-(s-c)+(f-c),f=r[++a],i=s,0!==u&&(o[g++]=u);return 0===i&&0!==g||(o[g++]=i),g}function p(t){return new Float64Array(t)}const m=p(4),b=p(8),N=p(12),S=p(16),A=p(4);function _(t,n,e,r,o,i){const s=(n-i)*(e-o),u=(t-o)*(r-i),c=s-u;if(0===s||0===u||s>0!=u>0)return c;const l=Math.abs(s+u);return Math.abs(c)>=33306690738754716e-32*l?c:-function(t,n,e,r,o,i,s){let u,c,l,f,h,a,p,_,w,I,y,v,T,x,M,E,O,C;const $=t-o,z=e-o,B=n-i,F=r-i;x=$*F,a=g*$,p=a-(a-$),_=$-p,a=g*F,w=a-(a-F),I=F-w,M=_*I-(x-p*w-_*w-p*I),E=B*z,a=g*B,p=a-(a-B),_=B-p,a=g*z,w=a-(a-z),I=z-w,O=_*I-(E-p*w-_*w-p*I),y=M-O,h=M-y,m[0]=M-(y+h)+(h-O),v=x+y,h=v-x,T=x-(v-h)+(y-h),y=T-E,h=T-y,m[1]=T-(y+h)+(h-E),C=v+y,h=C-v,m[2]=v-(C-h)+(y-h),m[3]=C;let L=function(t,n){let e=n[0];for(let t=1;t<4;t++)e+=n[t];return e}(0,m),P=22204460492503146e-32*s;if(L>=P||-L>=P)return L;if(h=t-$,u=t-($+h)+(h-o),h=e-z,l=e-(z+h)+(h-o),h=n-B,c=n-(B+h)+(h-i),h=r-F,f=r-(F+h)+(h-i),0===u&&0===c&&0===l&&0===f)return L;if(P=11093356479670487e-47*s+33306690738754706e-32*Math.abs(L),L+=$*f+F*u-(B*l+z*c),L>=P||-L>=P)return L;x=u*F,a=g*u,p=a-(a-u),_=u-p,a=g*F,w=a-(a-F),I=F-w,M=_*I-(x-p*w-_*w-p*I),E=c*z,a=g*c,p=a-(a-c),_=c-p,a=g*z,w=a-(a-z),I=z-w,O=_*I-(E-p*w-_*w-p*I),y=M-O,h=M-y,A[0]=M-(y+h)+(h-O),v=x+y,h=v-x,T=x-(v-h)+(y-h),y=T-E,h=T-y,A[1]=T-(y+h)+(h-E),C=v+y,h=C-v,A[2]=v-(C-h)+(y-h),A[3]=C;const Y=d(4,m,4,A,b);x=$*f,a=g*$,p=a-(a-$),_=$-p,a=g*f,w=a-(a-f),I=f-w,M=_*I-(x-p*w-_*w-p*I),E=B*l,a=g*B,p=a-(a-B),_=B-p,a=g*l,w=a-(a-l),I=l-w,O=_*I-(E-p*w-_*w-p*I),y=M-O,h=M-y,A[0]=M-(y+h)+(h-O),v=x+y,h=v-x,T=x-(v-h)+(y-h),y=T-E,h=T-y,A[1]=T-(y+h)+(h-E),C=v+y,h=C-v,A[2]=v-(C-h)+(y-h),A[3]=C;const k=d(Y,b,4,A,N);x=u*f,a=g*u,p=a-(a-u),_=u-p,a=g*f,w=a-(a-f),I=f-w,M=_*I-(x-p*w-_*w-p*I),E=c*l,a=g*c,p=a-(a-c),_=c-p,a=g*l,w=a-(a-l),I=l-w,O=_*I-(E-p*w-_*w-p*I),y=M-O,h=M-y,A[0]=M-(y+h)+(h-O),v=x+y,h=v-x,T=x-(v-h)+(y-h),y=T-E,h=T-y,A[1]=T-(y+h)+(h-E),C=v+y,h=C-v,A[2]=v-(C-h)+(y-h),A[3]=C;const D=d(k,N,4,A,S);return S[D-1]}(t,n,e,r,o,i,l)}p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(8),p(8),p(8),p(4),p(8),p(8),p(8),p(12),p(192),p(192),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(8),p(8),p(8),p(8),p(8),p(8),p(8),p(8),p(8),p(4),p(4),p(4),p(8),p(16),p(16),p(16),p(32),p(32),p(48),p(64),p(1152),p(1152),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(4),p(24),p(24),p(24),p(24),p(24),p(24),p(24),p(24),p(24),p(24),p(1152),p(1152),p(1152),p(1152),p(1152),p(2304),p(2304),p(3456),p(5760),p(8),p(8),p(8),p(16),p(24),p(48),p(48),p(96),p(192),p(384),p(384),p(384),p(768),p(96),p(96),p(96),p(1152);const w=Math.pow(2,-52),I=new Uint32Array(512);class y{static from(t,n=O,e=C){const r=t.length,o=new Float64Array(2*r);for(let i=0;i<r;i++){const r=t[i];o[2*i]=n(r),o[2*i+1]=e(r)}return new y(o)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:o}=this,i=t.length>>1;let s=1/0,u=1/0,c=-1/0,l=-1/0;for(let n=0;n<i;n++){const e=t[2*n],r=t[2*n+1];e<s&&(s=e),r<u&&(u=r),e>c&&(c=e),r>l&&(l=r),this._ids[n]=n}const f=(s+c)/2,h=(u+l)/2;let a,g,d,p=1/0;for(let n=0;n<i;n++){const e=v(f,h,t[2*n],t[2*n+1]);e<p&&(a=n,p=e)}const m=t[2*a],b=t[2*a+1];p=1/0;for(let n=0;n<i;n++){if(n===a)continue;const e=v(m,b,t[2*n],t[2*n+1]);e<p&&e>0&&(g=n,p=e)}let N=t[2*g],S=t[2*g+1],A=1/0;for(let n=0;n<i;n++){if(n===a||n===g)continue;const e=x(m,b,N,S,t[2*n],t[2*n+1]);e<A&&(d=n,A=e)}let I=t[2*d],y=t[2*d+1];if(A===1/0){for(let n=0;n<i;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];M(this._ids,this._dists,0,i-1);const n=new Uint32Array(i);let e=0;for(let t=0,r=-1/0;t<i;t++){const o=this._ids[t];this._dists[o]>r&&(n[e++]=o,r=this._dists[o])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(_(m,b,N,S,I,y)<0){const t=g,n=N,e=S;g=d,N=I,S=y,d=t,I=n,y=e}const T=function(t,n,e,r,o,i){const s=e-t,u=r-n,c=o-t,l=i-n,f=s*s+u*u,h=c*c+l*l,a=.5/(s*l-u*c);return{x:t+(l*f-u*h)*a,y:n+(s*h-c*f)*a}}(m,b,N,S,I,y);this._cx=T.x,this._cy=T.y;for(let n=0;n<i;n++)this._dists[n]=v(t[2*n],t[2*n+1],T.x,T.y);M(this._ids,this._dists,0,i-1),this._hullStart=a;let E=3;e[a]=n[d]=g,e[g]=n[a]=d,e[d]=n[g]=a,r[a]=0,r[g]=1,r[d]=2,o.fill(-1),o[this._hashKey(m,b)]=a,o[this._hashKey(N,S)]=g,o[this._hashKey(I,y)]=d,this.trianglesLen=0,this._addTriangle(a,g,d,-1,-1,-1);for(let i,s,u=0;u<this._ids.length;u++){const c=this._ids[u],l=t[2*c],f=t[2*c+1];if(u>0&&Math.abs(l-i)<=w&&Math.abs(f-s)<=w)continue;if(i=l,s=f,c===a||c===g||c===d)continue;let h=0;for(let t=0,n=this._hashKey(l,f);t<this._hashSize&&(h=o[(n+t)%this._hashSize],-1===h||h===e[h]);t++);h=n[h];let p,m=h;for(;p=e[m],_(l,f,t[2*m],t[2*m+1],t[2*p],t[2*p+1])>=0;)if(m=p,m===h){m=-1;break}if(-1===m)continue;let b=this._addTriangle(m,c,e[m],-1,-1,r[m]);r[c]=this._legalize(b+2),r[m]=b,E++;let N=e[m];for(;p=e[N],_(l,f,t[2*N],t[2*N+1],t[2*p],t[2*p+1])<0;)b=this._addTriangle(N,c,p,r[c],-1,r[N]),r[c]=this._legalize(b+2),e[N]=N,E--,N=p;if(m===h)for(;p=n[m],_(l,f,t[2*p],t[2*p+1],t[2*m],t[2*m+1])<0;)b=this._addTriangle(p,c,m,-1,r[m],r[p]),this._legalize(b+2),r[p]=b,e[m]=m,E--,m=p;this._hullStart=n[c]=m,e[m]=n[N]=c,e[c]=N,o[this._hashKey(l,f)]=c,o[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array(E);for(let t=0,n=this._hullStart;t<E;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let o=0,i=0;for(;;){const s=e[t],u=t-t%3;if(i=u+(t+2)%3,-1===s){if(0===o)break;t=I[--o];continue}const c=s-s%3,l=u+(t+1)%3,f=c+(s+2)%3,h=n[i],a=n[t],g=n[l],d=n[f];if(T(r[2*h],r[2*h+1],r[2*a],r[2*a+1],r[2*g],r[2*g+1],r[2*d],r[2*d+1])){n[t]=d,n[s]=h;const r=e[f];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===f){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(s,e[i]),this._link(i,f);const u=c+(s+1)%3;o<I.length&&(I[o++]=u)}else{if(0===o)break;t=I[--o]}}return i}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,o,i){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=e,this._link(s,r),this._link(s+1,o),this._link(s+2,i),this.trianglesLen+=3,s}}function v(t,n,e,r){const o=t-e,i=n-r;return o*o+i*i}function T(t,n,e,r,o,i,s,u){const c=t-s,l=n-u,f=e-s,h=r-u,a=o-s,g=i-u,d=f*f+h*h,p=a*a+g*g;return c*(h*p-d*g)-l*(f*p-d*a)+(c*c+l*l)*(f*g-h*a)<0}function x(t,n,e,r,o,i){const s=e-t,u=r-n,c=o-t,l=i-n,f=s*s+u*u,h=c*c+l*l,a=.5/(s*l-u*c),g=(l*f-u*h)*a,d=(s*h-c*f)*a;return g*g+d*d}function M(t,n,e,r){if(r-e<=20)for(let o=e+1;o<=r;o++){const r=t[o],i=n[r];let s=o-1;for(;s>=e&&n[t[s]]>i;)t[s+1]=t[s--];t[s+1]=r}else{let o=e+1,i=r;E(t,e+r>>1,o),n[t[e]]>n[t[r]]&&E(t,e,r),n[t[o]]>n[t[r]]&&E(t,o,r),n[t[e]]>n[t[o]]&&E(t,e,o);const s=t[o],u=n[s];for(;;){do{o++}while(n[t[o]]<u);do{i--}while(n[t[i]]>u);if(i<o)break;E(t,o,i)}t[e+1]=t[i],t[i]=s,r-o+1>=i-e?(M(t,n,o,r),M(t,n,e,i-1)):(M(t,n,e,i-1),M(t,n,o,r))}}function E(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function O(t){return t[0]}function C(t){return t[1]}function $(t){const n=t.coords.length/2,e=t.triangles,r=function(t){const n=t.triangles,e=new Map;for(let t=0;t<n.length;t+=3)for(let r=0;r<3;r++){const o=n[t+r],i=e.get(o)||[];i.push(t),e.set(o,i)}return e}(t),o=Array.from(t.hull),i=function(t,n=!1,e=!0){let r,o,i;for(const n of t)o={r:n,prev:r},void 0===i&&(i=o),void 0!==r&&(e&&(o.prev=r),r.next=o),r=o;return void 0!==i&&n&&(o.next=i,i.prev=o),i}(o,!0),l=u(i),g=new Set(o);let d=0;for(;l.length>0;){const t=s(++d*n)%l.length,o=l[t],i=o.r,u=o.next.r,p=a(r,i,u),m=h(e,p,i,u);if(g.has(m)){l[t]=l[l.length-1],l.pop();continue}f(r,e,p);const b=c(o,m);l.push(b),g.add(m)}return u(i).map((t=>t.r))}function z(t){return $(new y(t.flat(1))).map((n=>t[n]))}const B="red thin10 nofill ",F="http://www.w3.org/2000/svg";function L(t,n,e=B,r){const o=n.center,i=n.radius,s=document.createElementNS(F,"circle");return s.setAttributeNS(null,"cx",o[0].toString()),s.setAttributeNS(null,"cy",o[1].toString()),s.setAttributeNS(null,"r",i.toString()),s.setAttributeNS(null,"class",e),t.appendChild(s),r&&setTimeout((()=>s.remove()),r),[s]}function P(t,n,e=B,r){const o=document.createElementNS(F,"line");return o.setAttributeNS(null,"x1",n[0][0].toString()),o.setAttributeNS(null,"y1",n[0][1].toString()),o.setAttributeNS(null,"x2",n[1][0].toString()),o.setAttributeNS(null,"y2",n[1][1].toString()),o.setAttributeNS(null,"class",e),t.appendChild(o),r&&setTimeout((()=>o.remove()),r),[o]}function Y(t,n,e=B,r=3,o){const i=L(t,{center:n,radius:r},e),s=[[n[0]-r,n[1]],[n[0]+r,n[1]]],u=[[n[0],n[1]-r],[n[0],n[1]+r]],c=P(t,s,e),l=P(t,u,e);return o&&setTimeout((()=>{i.forEach((t=>t.remove())),c.forEach((t=>t.remove())),l.forEach((t=>t.remove()))}),o),[...i,...c,...l]}function k(t){return 2===t?"L":3===t?"Q":4===t?"C":void 0}function D(t,n,e=B,r){const[[o,i],[s,u],[c,l]]=n,f=document.createElementNS(F,"path");return f.setAttributeNS(null,"d",`M${o} ${i} Q${s} ${u} ${c} ${l}`),e&&f.setAttributeNS(null,"class",e),t.appendChild(f),r&&setTimeout((()=>f.remove()),r),[f]}function V(t,n,e=B,r){const[[o,i],[s,u],[c,l],[f,h]]=n;if(o===f&&s===f&&c===f&&i===h&&u===h&&l===h)return Y(t,[o,i],e,.2,r);const a=document.createElementNS(F,"path");return a.setAttributeNS(null,"d",`M${o} ${i} C${s} ${u} ${c} ${l} ${f} ${h}`),a.setAttributeNS(null,"class",e),t.appendChild(a),r&&setTimeout((()=>a.remove()),r),[a]}function U(t,n,e=B,r){return 2===n.length?P(t,n,e,r):3===n.length?D(t,n,e,r):4===n.length?V(t,n,e,r):[]}const K=["red","green","cyan","blue"];function H(t,n){const e=1-n;if(4===t.length){const[[r,o],[i,s],[u,c],[l,f]]=t;return[r*e**3+3*i*e**2*n+3*u*e*n**2+l*n**3,o*e**3+3*s*e**2*n+3*c*e*n**2+f*n**3]}if(3===t.length){const[[r,o],[i,s],[u,c]]=t;return[r*e**2+2*i*e*n+u*n**2,o*e**2+2*s*e*n+c*n**2]}if(2===t.length){const[[r,o],[i,s]]=t;return[r*e+i*n,o*e+s*n]}return[NaN,NaN]}function Q(t,n){return 2===t.length?function(t,n){const[[e,r],[o,i]]=t,s=1-n,u=[s*e+n*o,s*r+n*i];return[[[e,r],u],[u,[o,i]]]}(t,n):3===t.length?function(t,n){const[[e,r],[o,i],[s,u]]=t,c=1-n,l=[c*c*e+2*c*n*o+n*n*s,c*c*r+2*c*n*i+n*n*u];return[[[e,r],[c*e+n*o,c*r+n*i],l],[l,[c*o+n*s,c*i+n*u],[s,u]]]}(t,n):4===t.length?function(t,n){const[[e,r],[o,i],[s,u],[c,l]]=t,f=1-n,h=n*n,a=h*n,g=f*f,d=g*f,p=[a*c+3*f*h*s+3*g*n*o+d*e,a*l+3*f*h*u+3*g*n*i+d*r];return[[[e,r],[n*o+f*e,n*i+f*r],[h*s+2*f*n*o+g*e,h*u+2*f*n*i+g*r],p],[p,[h*c+2*n*f*s+g*o,h*l+2*n*f*u+g*i],[n*c+f*s,n*l+f*u],[c,l]]]}(t,n):[]}const X={circle:L,crossHair:Y,dot:function(t,n,e=3,r="red",o){const[i]=L(t,{center:n,radius:e},"dot "+r,o);return o&&setTimeout((()=>i.remove()),o),[i]},line:P,rect:function(t,n,e=B,r){const[[o,i],[s,u]]=n,c=o<s?o:s,l=i<u?i:u,f=Math.abs(o-s),h=Math.abs(i-u),a=document.createElementNS(F,"rect");return a.setAttributeNS(null,"x",c.toString()),a.setAttributeNS(null,"y",l.toString()),a.setAttributeNS(null,"width",f.toString()),a.setAttributeNS(null,"height",h.toString()),e&&a.setAttributeNS(null,"class",e),t.appendChild(a),r&&setTimeout((()=>a.remove()),r),[a]},beziers:function(t,n,e,r){const o=void 0===e,i=[];for(let r=0;r<n.length;r++){const s=n[r],u=o?"thin5 nofill "+K[r%K.length]:e;i.push(...U(t,s,u))}return r&&setTimeout((()=>i.forEach((t=>t.remove()))),r),i},bezier:U,bezierPiece:function(t,n,e,r=B,o){const i=e[0]===e[1]?Y(t,H(n,e[0]),r,1.5):U(t,function(t,n){if(0===n[0]&&1===n[1])return t;if(n[0]===n[1]){const e=H(t,n[0]);return[e,e,e,e]}return 0===n[0]?Q(t,n[1])[0]:1===n[1]?Q(t,n[0])[1]:Q(Q(t,n[0])[1],(n[1]-n[0])/(1-n[0]))[0]}(n,e),r);return o&&setTimeout((()=>i.forEach((t=>t.remove()))),o),i},quadBezier:D,cubicBezier:V,polygon:function(t,n,e=B,r){const o=document.createElementNS(F,"path");let i=`M${n[0][0]} ${n[0][1]} L`;for(let t=0;t<n.length;t++)i+=`${n[t][0]} ${n[t][1]} `;return i+=" z",o.setAttributeNS(null,"d",i),e&&o.setAttributeNS(null,"class",e),t.appendChild(o),r&&setTimeout((()=>o.remove()),r),[o]},loop:function(t,n,e=B,r){if(!n.length)return[];const o=document.createElementNS(F,"path");let i=`M${n[0][0][0]} ${n[0][0][1]} `;for(let t=0;t<n.length;t++){const e=n[t];i+=`${k(e.length)} `;for(let t=1;t<e.length;t++)i+=`${e[t][0]} ${e[t][1]} `}return i+=" z",o.setAttributeNS(null,"d",i),e&&o.setAttributeNS(null,"class",e),t.appendChild(o),r&&setTimeout((()=>o.remove()),r),[o]},polyline:function(t,n,e=B,r){if(n.length<2)return[];const o=document.createElementNS(F,"path");let i=`M${n[0][0]} ${n[0][1]} L`;for(let t=0;t<n.length;t++)i+=`${n[t][0]} ${n[t][1]} `;return o.setAttributeNS(null,"d",i),e&&o.setAttributeNS(null,"class",e),t.appendChild(o),r&&setTimeout((()=>o.remove()),r),[o]},text:function(t,n,e,r,o=B,i){const s=document.createElementNS(F,"text");return s.setAttributeNS(null,"x",n[0].toString()),s.setAttributeNS(null,"y",n[1].toString()),s.setAttributeNS(null,"font-size",r.toString()),s.setAttributeNS(null,"class",o),s.textContent=e,t.appendChild(s),i&&setTimeout((()=>s.remove()),i),[s]}};function q(t,n){function e(n,e){let r=t.get(n);r||(r=new Set,t.set(n,r)),r.add(e)}j(t,n)||(e(n[0],n[1]),e(n[1],n[0]))}function j(t,n){let e;e=t.get(n[0]);const r=e&&e.has(n[1]);e=t.get(n[1]);const o=e&&e.has(n[0]);return r||o}const G={point:function(t,n,e="thin5 yellow",r=0){return X.dot(t,n,.0125,e,r)},polygon:function(t,n,e="thin5 cyan nofill",r=0){return X.polygon(t,n,e,r)},cubics:function(t,n,e="pink thin50 nofill",r){const o=document.createElementNS("http://www.w3.org/2000/svg","path"),i=function(t){let n="";for(let e=0;e<t.length;e++){const r=t[e];0===e&&(n="M "+r[0][0].toString()+" "+r[0][1].toString()+"\n"),4===r.length?n+="C "+r[1][0].toString()+" "+r[1][1].toString()+" "+r[2][0].toString()+" "+r[2][1].toString()+" "+r[3][0].toString()+" "+r[3][1].toString()+" \n":3===r.length?n+="Q "+r[1][0].toString()+" "+r[1][1].toString()+" "+r[2][0].toString()+" "+r[2][1].toString()+" \n":2===r.length&&(n+="L "+r[1][0].toString()+" "+r[1][1].toString()+" \n")}return n+" z\n"}(n);return o.setAttributeNS(null,"d",i),e&&o.setAttributeNS(null,"class",e),t.appendChild(o),r&&setTimeout((()=>o.remove()),r),[o]},triangles:function(t,n,e="thin5 yellow nofill",r=0){const o=new Map,i=[],s=n.length;for(let u=0;u<s;u++){const s=n[u];for(let n=0;n<s.length;n++){const u=[s[n],s[(n+1)%3]];if(j(o,[u[0],u[1]]))continue;q(o,[u[0],u[1]]);const c=X.line(t,u,e,r);i.push(c)}}return i.flat(1)}};function R(t){if(!t)return void(window._debug_=void 0);let n=window._debug_;n={...n,generated:{...n&&n.generated?n.generated:{},elems:{...n&&n.generated&&n.generated.elems?n.generated.elems:{},point:[],polygon:[],cubics:[],triangles:[]},timing:{...n&&n.generated&&n.generated.timing?n.generated.timing:{},normalize:0}},fs:{...n&&n.fs?n.fs:{},drawElem:{...n&&n.fs&&n.fs.drawElem?n.fs.drawElem:{},...G}}},window._debug_=n}const{floor:W}=Math;function J(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Z(t,n){return[n[0]-t[0],n[1]-t[1]]}function tt(t,n){const e=n/Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[e*t[0],e*t[1]]}function nt(t,n){function e(n){return[t[0]+n[0],t[1]+n[1]]}return void 0===n?e:e(n)}function et(t,n){if(0===t)return n.map((t=>function(t){const[[n,e],[r,o]]=t,i=(r-n)/3,s=(o-e)/3;return[[n,e],[n+i,e+s],[n+2*i,e+2*s],[r,o]]}([t[0],t[3]])));const e=t,r=t;return n.map((t=>function(t,n,e){const r=t[0],o=t[1],i=t[2],s=t[3],u=J([s[0]-r[0],s[1]-r[1]]),c=Z(r,o),l=Z(s,i);return[r,nt(r,tt(c,n/3*u)),nt(s,tt(l,e/3*u)),s]}(t,e,r)))}function rt(t){if(4===t.length)return function(t){const[[n,e],[r,o],[i,s],[u,c]]=t;return[[u-n+3*(r-i),3*(i+n-2*r),3*(r-n),n],[c-e+3*(o-s),3*(s+e-2*o),3*(o-e),e]]}(t);if(3===t.length)return function(t){const[[n,e],[r,o],[i,s]]=t;return[[i+n-2*r,2*(r-n),n],[s+e-2*o,2*(o-e),e]]}(t);if(2===t.length)return function(t){const[[n,e],[r,o]]=t;return[[r-n,n],[o-e,e]]}(t);if(1===t.length)return function(t){const[[n,e]]=t;return[[n],[e]]}(t);throw new Error("The given bezier curve must be of order <= 3.")}function ot(t){if(4===t.length)return function(t){const[[n,e],[r,o],[i,s],[u,c]]=t;return[[3*(u-n+3*(r-i)),6*(i+n-2*r),3*(r-n)],[3*(c-e+3*(o-s)),6*(s+e-2*o),3*(o-e)]]}(t);if(3===t.length)return function(t){const[[n,e],[r,o],[i,s]]=t;return[[2*(i+n-2*r),2*(r-n)],[2*(s+e-2*o),2*(o-e)]]}(t);if(2===t.length)return function(t){const[[n,e],[r,o]]=t;return[[r-n],[o-e]]}(t);if(1===t.length)return[[0],[0]];throw new Error("The bezier curve must be of order <= 3.")}function it(t,n){const e=[],r=t.length-1;for(let n=0;n<r+1;n++)e.push(t[n]/(r+1-n));return e.push(n),e}function st(t){let n=0;for(let e=0;e<=t.length-1&&0===t[e];e++)n++;return 0!==n&&(t=t.slice(n)),t}const ut=st;function ct(t,n){const e=t.length-1,r=n.length-1;if(e<0||r<0)return[];const o=e+r,i=new Array(o+1).fill(0);for(let s=0;s<e+1;s++)for(let u=0;u<r+1;u++)i[o-(s+u)]+=t[e-s]*n[r-u];return ut(i)}function lt(t,n){let e=0;for(let r=0;r<t.length;r++)e=e*n+t[r];return e}function ft(t){const n=[];for(let e=0;e<t.length;e++)n.push(-t[e]);return n}const ht=st;function at(t,n){const e=t.length-1,r=n.length-1,o=e-r,i=o<0?+o:0,s=o>0?-o:0,u=Math.max(e,r),c=[];for(let e=0;e<u+1;e++){const r=t[e+i]||0,o=n[e+s]||0;c.push(r+o)}return ht(c)}function gt(t){return[-t[0],-t[1]]}function dt(t){const n=function(t=[],n){const e=[],r={beziers:t,curves:e,idx:void 0};if(!t.length)return r;let o,i=0;for(let n=0;n<t.length;n++){if(2===(s=t[n]).length?s[0][0]===s[1][0]&&s[0][1]===s[1][1]:3===s.length?s[0][0]===s[1][0]&&s[0][1]===s[1][1]&&s[1][1]===s[2][1]&&s[1][1]===s[2][1]:s[0][0]===s[1][0]&&s[0][1]===s[1][1]&&s[1][1]===s[2][1]&&s[1][1]===s[2][1]&&s[2][1]===s[3][1]&&s[2][1]===s[3][1])continue;const u={loop:r,ps:t[n],prev:o,next:void 0,idx:i};o&&(o.next=u),o=u,e.push(u),i++}var s;const u=e[e.length-1];return e[0].prev=u,u.next=e[0],u.ps[u.ps.length-1]=e[0].ps[0],r}(t),e=nt(gt(function(t){const n=function(t){let n=0;for(const e of t.curves){const t=e.ps,[r,o]=rt(t),[i,s]=ot(t);n+=lt(it(at(ct(r,s),ft(ct(o,i))),0),1)}return-n/2}(t);let e=0,r=0;for(const n of t.curves){const t=n.ps,[o,i]=rt(t),[s,u]=ot(t),c=it(ct(ct(o,o),u),0),l=it(ct(ct(i,i),s),0);e+=lt(c,1),r+=lt(l,1)}const o=1/(2*n);return[-o*e,o*r]}(n)));return n.beziers.map((t=>t.map(e)))}function pt(t,n){return[n*t[0],n*t[1]]}const mt=lt,bt=Number.EPSILON/2,Nt=Math.abs,St=Math.max,At=ft,_t=function(t){return n=>1/t(function(t){return t.slice().reverse()}(n))};function wt(t){const n=t.length-1;if(n<1)return 0;t[0]<0&&(t=At(t));const e=[];for(let t=0;t<n;t++)e.push(1);let r=0;for(let o=0;o<=n;o++){if(t[o]>=0)continue;let n=Number.POSITIVE_INFINITY,i=!1;for(let r=0;r<o;r++){if(t[r]<=0)continue;const s=(-t[o]/(t[r]/2**e[r]))**(1/(o-r));e[r]++,n>s&&(n=s),i=!0}i&&r<n&&(r=n)}return r}_t(wt);const It=(Ot=wt,t=>-Ot(function(t){const n=t.length-1;if(n<0)return[];const e=t.slice();for(let t=0;t<n+1;t++)t%2&&(e[t]=-e[t]);return e}(t))),yt=(_t(It),function(t){const n=[],e=t.length-1;for(let r=0;r<e;r++)n.push((e-r)*t[r]);return n}),vt=lt,Tt=function(t,n,e,r=mt(t,n),o=mt(t,e)){let i=n,s=e,u=i,c=r,l=s-i,f=l;for(;;){Nt(c)<Nt(o)&&(i=s,s=u,u=i,r=o,o=c,c=r);const n=2*bt*St(1,Nt(i),Nt(s)),e=.5*(u-s);if(Nt(e)<=n)return s;if(Nt(l)<n||Nt(r)<=Nt(o))l=e,f=l;else{let t,h,a=o/r;if(i===u)t=2*e*a,h=1-a;else{h=r/c;const n=o/c;t=a*(2*e*h*(h-n)-(s-i)*(n-1)),h=(h-1)*(n-1)*(a-1)}0<t?h=-h:t=-t,a=l,l=f,2*t<3*e*h-Nt(n*h)&&t<Nt(.5*a*h)?f=t/h:(l=e,f=l)}if(i=s,r=o,n<Nt(f)?s+=f:0<e?s+=n:s-=n,0===(o=mt(t,s)))return s;o*c>0&&(u=i,c=r,l=s-i,f=l)}},xt=It,Mt=wt,Et=st;var Ot;function Ct(t,n=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY){t=Et(t);let r=0;for(;0===t[t.length-1];)t=t.slice(0,-1),r++;if(t.length<=1){const t=[];for(let n=0;n<r;n++)t.push(0);return t}n===Number.NEGATIVE_INFINITY&&(n=xt(t)),e===Number.POSITIVE_INFINITY&&(e=Mt(t));const o=[t];for(let n=1;n<=t.length-1;n++)o.push(yt(o[n-1]));let i=[];for(let r=t.length-2;r>=0;r--){const t=o[r],s=[];let u=n,c=vt(t,u);0===c&&0===r&&s.push(n);for(let n=0;n<i.length;n++){const e=i[n],r=vt(t,e);0===r?s.push(e):c*r<0&&s.push(Tt(t,u,e,c,r)),u=e,c=r}const l=vt(t,e);c*l<0&&s.push(Tt(t,u,e,c,l)),0===l&&0===r&&s.push(e),i=s}if(r>0&&n<=0&&e>=0){const t=[];let n=!1;for(let e=0;e<i.length;e++){if(!n&&i[e]>=0){for(let n=0;n<r;n++)t.push(0);n=!0}t.push(i[e])}return t}return i}function $t(t,n){if(0===n)return t[0];if(1===n)return t[t.length-1];if(4===t.length){const[[e,r],[o,i],[s,u],[c,l]]=t,f=e+(o-e)*n,h=o+(s-o)*n,a=f+(h-f)*n,g=r+(i-r)*n,d=i+(u-i)*n,p=g+(d-g)*n;return[a+(h+(s+(c-s)*n-h)*n-a)*n,p+(d+(u+(l-u)*n-d)*n-p)*n]}if(3===t.length){const[[e,r],[o,i],[s,u]]=t,c=e+(o-e)*n,l=r+(i-r)*n;return[c+(o+(s-o)*n-c)*n,l+(i+(u-i)*n-l)*n]}if(2===t.length){const[[e,r],[o,i]]=t;return[e+(o-e)*n,r+(i-r)*n]}if(1===t.length)return t[0];throw new Error("The given bezier curve must be of order <= 3.")}const{max:zt,abs:Bt}=Math;function Ft(t,n){const{minX:e,minY:r,maxX:o,maxY:i}=function(t){const n=t.map((t=>function(t){const n=ot(t),e=Ct(n[0],0,1),r=Ct(n[1],0,1);e.push(0,1),r.push(0,1);let o,i,s,u,c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n],[s]=$t(t,r);s<c&&(c=s,o=r),s>l&&(l=s,i=r)}for(let n=0;n<r.length;n++){const e=r[n],[,o]=$t(t,e);o<f&&(f=o,s=e),o>h&&(h=o,u=e)}return{ts:[[o,s],[i,u]],box:[[c,f],[l,h]]}}(t)));return{minX:Math.min(...n.map((t=>t.box[0][0]))),maxX:Math.max(...n.map((t=>t.box[1][0]))),minY:Math.min(...n.map((t=>t.box[0][1]))),maxY:Math.max(...n.map((t=>t.box[1][1])))}}(n),s=1/zt(Bt(o),Bt(e),Bt(i),Bt(r))*t,u=t=>pt(t,s);return n.map((t=>t.map(u)))}function Lt(t,n,e){function r(e){return[e[0]*n-e[1]*t,e[0]*t+e[1]*n]}return void 0===e?r:r(e)}const{cos:Pt,sin:Yt,atan2:kt}=Math;function Dt(t){const n=t[0];t=t.map(nt(gt(n)));const[e,r]=[t[3][0],t[3][1]],o=kt(r,e),i=(t=t.map(Lt(Yt(-o),Pt(-o))))[3][0];t=t.map((t=>pt(t,1/i)));const s=t[1],u=[1-t[2][0],-t[2][1]];return{α:kt(s[1],s[0]),β:kt(u[1],u[0]),s0:3*J(s),s1:3*J(u),L:i,rot:o,p:n}}function Vt(t,n,e=16){if(n[0]===n[1])return 0;const{weights:r,abscissas:o}=Ut[e],[i,s]=n;let u=0;const c=(s-i)/2,l=(s+i)/2;for(let n=0;n<=e-1;n++)u+=r[n]*t(c*o[n]+l);return c*u}const Ut={2:{weights:[1,1],abscissas:[-.5773502691896257,.5773502691896257]},4:{weights:[.6521451548625461,.6521451548625461,.3478548451374538,.3478548451374538],abscissas:[-.3399810435848563,.3399810435848563,-.8611363115940526,.8611363115940526]},8:{weights:[.362683783378362,.362683783378362,.3137066458778873,.3137066458778873,.2223810344533745,.2223810344533745,.1012285362903763,.1012285362903763],abscissas:[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363]},16:{weights:[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685,.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],abscissas:[-.9894009349916499,-.9445750230732326,-.8656312023878318,-.755404408355003,-.6178762444026438,-.45801677765722737,-.2816035507792589,-.09501250983763744,.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]},64:{weights:[.048690957009139724,.048690957009139724,.04857546744150343,.04857546744150343,.048344762234802954,.048344762234802954,.04799938859645831,.04799938859645831,.04754016571483031,.04754016571483031,.04696818281621002,.04696818281621002,.046284796581314416,.046284796581314416,.04549162792741814,.04549162792741814,.044590558163756566,.044590558163756566,.04358372452932345,.04358372452932345,.04247351512365359,.04247351512365359,.04126256324262353,.04126256324262353,.03995374113272034,.03995374113272034,.038550153178615626,.038550153178615626,.03705512854024005,.03705512854024005,.035472213256882386,.035472213256882386,.033805161837141606,.033805161837141606,.03205792835485155,.03205792835485155,.030234657072402478,.030234657072402478,.028339672614259483,.028339672614259483,.02637746971505466,.02637746971505466,.024352702568710874,.024352702568710874,.022270173808383253,.022270173808383253,.02013482315353021,.02013482315353021,.017951715775697343,.017951715775697343,.015726030476024718,.015726030476024718,.013463047896718643,.013463047896718643,.011168139460131128,.011168139460131128,.008846759826363947,.008846759826363947,.006504457968978363,.006504457968978363,.004147033260562468,.004147033260562468,.001783280721696433,.001783280721696433],abscissas:[-.024350292663424433,.024350292663424433,-.07299312178779904,.07299312178779904,-.12146281929612056,.12146281929612056,-.16964442042399283,.16964442042399283,-.21742364374000708,.21742364374000708,-.2646871622087674,.2646871622087674,-.31132287199021097,.31132287199021097,-.3572201583376681,.3572201583376681,-.4022701579639916,.4022701579639916,-.4463660172534641,.4463660172534641,-.48940314570705296,.48940314570705296,-.5312794640198946,.5312794640198946,-.571895646202634,.571895646202634,-.6111553551723933,.6111553551723933,-.6489654712546573,.6489654712546573,-.6852363130542333,.6852363130542333,-.7198818501716109,.7198818501716109,-.7528199072605319,.7528199072605319,-.7839723589433414,.7839723589433414,-.8132653151227975,.8132653151227975,-.8406292962525803,.8406292962525803,-.8659993981540928,.8659993981540928,-.8893154459951141,.8893154459951141,-.9105221370785028,.9105221370785028,-.9295691721319396,.9295691721319396,-.9464113748584028,.9464113748584028,-.9610087996520538,.9610087996520538,-.973326827789911,.973326827789911,-.983336253884626,.983336253884626,-.9910133714767443,.9910133714767443,-.9963401167719553,.9963401167719553,-.9993050417357722,.9993050417357722]}};function Kt(t){return t[t.length-1]}function Ht(t){const n=new ArrayBuffer(8);return new DataView(n).setFloat64(0,t,!1),Array.from(new Uint8Array(n))}function Qt(t){return Ht(t).map(Xt).join("")}function Xt(t){let n=t.toString(2);for(;n.length<8;n="0"+n);return n}function qt(t){const n=Ht(t),e=n[0],r=n[1],o=e>>7,i=((127&e)<<4)+((240&r)>>4),s=0===i?0:16,u=0===i?i-1022:i-1023,c=n.slice(1);return c[0]=(15&r)+s,{sign:o,exponent:u,significand:c}}function jt(t){return qt(t).significand}function Gt(t){return Math.log2(t&-t)}function Rt(t){if(0===t||!Number.isFinite(t))return NaN;const n=jt(t),e=n.length;for(let t=e-1;t>=0;t--){if(0===n[t])continue;const r=Gt(n[t]);if(Number.isFinite(r))return 8*(e-t-1)+r}return NaN}function Wt(t){return t>=128?7:t>=64?6:t>=32?5:t>=16?4:t>=8?3:t>=4?2:t>=2?1:t>=1?0:NaN}function Jt(t){if(0===t||!Number.isFinite(t))return NaN;const n=jt(t),e=n.length;for(let t=0;t<e;t++){const r=Wt(n[t]);if(Number.isFinite(r))return 8*(e-t-1)+r}return NaN}function Zt(t){return qt(t).exponent}function tn(t){if(0===t||!Number.isFinite(t))return NaN;const n=Zt(t);return Jt(t)-52+n}function nn(t){const n=t.slice(),e=n.length;if(1===e)return n;let r=n[e-1],o=e;for(let t=e-2;t>=0;--t){const e=r,i=n[t];r=e+i;const s=i-(r-e);s&&(n[--o]=r,r=s)}let i=0;for(let t=o;t<e;++t){const e=n[t],o=r;r=e+o;const s=o-(r-e);s&&(n[i++]=s)}return n[i++]=r,n.length=i,n}function en(t,n){const e=(2**(53-n)+1)*t;return e-(e-t)}const rn=Kt,on=nn;function sn(t,n){if(t=on(t),0===rn(t))return[0];const e=tn(t[t.length-1]);let r=e,o=t.length-1;for(;o>0;){const i=tn(t[o-1]);if(e-i>n)break;r=i,o--}const i=Math.min(n-(e-r),53);let s=t[o];s=en(s,i);const u=t.slice(o);return u[0]=s,u}function un(t){let n=t[0];for(let e=1;e<t.length;e++)n+=t[e];return n}function cn(t,n){const e=t.length,r=n.length;let o=0,i=0;const s=[];for(;o<e&&i<r;)0!==t[o]?0!==n[i]?Math.abs(t[o])<=Math.abs(n[i])?(s.push(t[o]),o++):(s.push(n[i]),i++):i++:o++;for(;o<e;)s.push(t[o]),o++;for(;i<r;)s.push(n[i]),i++;if(0===s.length)return[0];const u=s.length;if(1===u)return s;const c=[],l=s[1],f=s[0];let h=l+f;const a=f-(h-l);0!==a&&c.push(a),i=0;for(let t=2;t<u;t++){const n=s[t],e=h+n,r=e-h,o=h-(e-r)+(n-r);0!==o&&c.push(o),h=e}return 0===h&&0!==c.length||c.push(h),c}const ln=134217729;function fn(t,n){const e=t.length;let r;const o=t[0];let i=o*n;const s=ln*o,u=s-(s-o),c=o-u,l=ln*n,f=l-(l-n),h=n-f,a=[],g=c*h-(i-u*f-c*f-u*h);0!==g&&a.push(g);for(let o=1;o<e;o++){const e=t[o],s=e*n,u=ln*e,c=u-(u-e),l=e-c,f=ln*n,h=f-(f-n),g=n-h,d=l*g-(s-c*h-l*h-c*g),p=i+d,m=p-i,b=i-(p-m)+(d-m);0!==b&&a.push(b),r=p;const N=s+r,S=r-(N-s);0!==S&&a.push(S),i=N}return 0===i&&0!==a.length||a.push(i),a}function hn(t,n){const e=n.length;let r;const o=n[0];let i=o*t;const s=ln*o,u=s-(s-o),c=o-u,l=ln*t,f=l-(l-t),h=t-f,a=[],g=c*h-(i-u*f-c*f-u*h);0!==g&&a.push(g);for(let o=1;o<e;o++){const e=n[o],s=e*t,u=ln*e,c=u-(u-e),l=e-c,f=ln*t,h=f-(f-t),g=t-h,d=l*g-(s-c*h-l*h-c*g),p=i+d,m=p-i,b=i-(p-m)+(d-m);0!==b&&a.push(b),r=p;const N=s+r,S=r-(N-s);0!==S&&a.push(S),i=N}return 0===i&&0!==a.length||a.push(i),a}const an=fn,gn=cn;function dn(t,n){let e=[0];for(let r=0;r<t.length;r++)e=gn(e,an(n,t[r]));return e}function pn(t){const n=t.length,e=new Array(n);for(let r=0;r<n;r++)e[r]=-t[r];return e}const mn=pn,bn=cn;function Nn(t,n){const e=mn(n);return bn(t,e)}function Sn(t){const n=nn(t);if(0===Kt(n))return 0;const e=n[n.length-1],r=n[0];return Zt(e)-Zt(r)+(53-Rt(r))}const An=dn,_n=sn,wn=Sn,In=Nn,yn=un;function vn(t,n){const e=t.length;let r=n;const o=[];for(let n=0;n<e;n++){const e=t[n],i=r+e,s=i-r,u=r-(i-s)+(e-s);0!==u&&o.push(u),r=i}return 0===r&&0!==o.length||o.push(r),o}function Tn(t,n){const e=t+n,r=e-t;return[t-(e-r)+(n-r),e]}const xn=Tn,Mn=vn,En=cn;function On(t){let n=[0];for(let e=0;e<t.length;e++){const r=t[e];n=1===r.length?1===n.length?xn(n[0],r[0]):Mn(n,r[0]):1===n.length?Mn(r,n[0]):En(n,r)}return n}const Cn=pn,$n=cn,zn=nn,Bn=vn,Fn=On,Ln=fn,Pn=Nn,Yn=Math.sign;function kn(t,n){t=zn(t);const e=(n=zn(n))[n.length-1];if(1===n.length){if(0===e)throw new Error("division by zero");if(1===e)return{div:t,rem:[0]};if(-1===e)return{div:Cn(t),rem:[0]}}const r=Yn(t[t.length-1]);if(0===r)return{div:[0],rem:[0]};const o=Yn(e),i=[];let s=0;for(;;){const r=[];for(let o=t.length-1;o>=0;o--){const s=t[o],u=Math.round((s-s%e)/e);if(r.push(Ln(n,u)),0===u)break;i.push(u)}if(t=zn(Pn(t,Fn(r))),s===i.length)break;s=i.length}let u=t,c=[0];for(let t=0;t<i.length;t++)c=Bn(c,i[t]);c=zn(c);const l=Yn(u[u.length-1]);return 0!==l&&l!==r&&(r>0?o>0?(c=Bn(c,-1),u=$n(u,n)):(c=Bn(c,1),u=$n(u,Cn(n))):r<0&&(o>0?(c=Bn(c,1),u=$n(u,Cn(n))):(c=Bn(c,-1),u=$n(u,n)))),{div:c,rem:u}}const Dn=kn,Vn=kn,Un=pn;function Kn(t,n){const e=t-n,r=t-e;return[t-(e+r)+(r-n),e]}const Hn=134217729;function Qn(t,n){const e=t*n,r=Hn*t,o=r-(r-t),i=t-o,s=Hn*n,u=s-(s-n),c=n-u;return[i*c-(e-o*u-i*u-o*c),e]}const Xn=dn,qn=Qn,jn=fn,Gn=Tn,Rn=vn,Wn=cn,Jn=dn,Zn=Qn,te=fn,ne=nn;function ee(t){let n=t[0];for(let e=1;e<t.length;e++){const r=t[e];n=1==r.length?1===n.length?Zn(n[0],r[0]):te(n,r[0]):1===n.length?te(r,n[0]):Jn(r,n)}return ne(n)}const re=dn,oe=ee,ie=nn;function se(t,n){return!function(t,n){if(0===t||0===n)return!0;Math.abs(n)>Math.abs(t)&&([t,n]=[n,t]);const e=Rt(t),r=Jt(n);return e+(Zt(t)-Zt(n))>r}(t,n)}const ue=cn,ce={fastTwoDiff:function(t,n){const e=t-n;return[t-e-n,e]},fastTwoSum:function(t,n){const e=t+n;return[n-(e-t),e]},split:function(t){const n=134217729*t,e=n-(n-t);return[e,t-e]},twoDiff:Kn,twoProduct:Qn,twoSum:Tn,reduceSignificand:en,fastExpansionSum:cn,eAdd:ue,growExpansion:vn,eAddDouble:vn,expansionProduct:dn,eMult:dn,scaleExpansion:fn,eMultDouble1:fn,scaleExpansion2:hn,eMultDouble2:hn,eDiv:function(t,n,e){let r=n,o=t,i=!1,s=0;e||(s=wn(o)-wn(r)+1,e=s/53+1,i=!0);let u=[1/yn(r)],c=1;for(;;){if(o=An(o,u),c>e)return i?(o=_n(o,s),o):o.slice(o.length-e,o.length);r=An(r,u),u=In([2],r),c*=2}},eLongDivide:kn,eIntDiv:function(t,n){return Dn(t,n).div},eRem:function(t,n){return Vn(t,n).rem},eCompress:nn,eEstimate:un,eDiff:Nn,eNegativeOf:pn,eMultBy2:function(t){const n=[];for(let e=0;e<t.length;e++)n.push(2*t[e]);return n},eMultByNeg2:function(t){const n=[];for(let e=0;e<t.length;e++)n.push(-2*t[e]);return n},eDivBy2:function(t){const n=[];for(let e=0;e<t.length;e++)n.push(.5*t[e]);return n},eSign:Kt,eCompare:function(t,n){return Kt(Nn(t,n))},eAbs:function(t){return t[t.length-1]<0?Un(t):t},eToBitlength:sn,eIntPow:function(t,n){if(0===n)return[1];if(1===n)return t;if(2===n)return re(t,t);const e=[];for(let r=0;r<n;r++)e.push(t);return oe(e)},eCalculate:function(t){let n=[0];for(let e=0;e<t.length;e++){const r=t[e];let o=r[0];for(let t=1;t<r.length;t++){const n=r[t];o=1==n.length?1===o.length?qn(o[0],n[0]):jn(o,n[0]):1===o.length?jn(n,o[0]):Xn(n,o)}n=1===o.length?1===n.length?Gn(n[0],o[0]):Rn(n,o[0]):1===n.length?Rn(o,n[0]):Wn(n,o)}return n},eSum:On,eProduct:ee,eToDd:function(t){const n=(t=ie(t)).length;return 2===n?t:1===n?[0,t[0]]:[t[n-2],t[n-1]]},parseDouble:qt,parseDoubleDetailed:function(t){const n=Qt(t),[,e,r,o]=n.match(/^(.)(.{11})(.{52})$/),i=0===parseInt(r,2)?"0":"1";return{full:e+r+i+o,sign:e,exponent:r,hidden:i,significand:o}},isBitAligned:function(t,n,e){if(0===t)return!0;const r=Zt(t),o=Jt(t)-52+r;return Rt(t)-52+r>=e&&o<=n-1+e},msbExponent:tn,lsbExponent:function(t){if(0===t||!Number.isFinite(t))return NaN;const n=Zt(t);return Rt(t)-52+n},bitLength:function(t){return 0===t?0:Jt(t)-Rt(t)+1},expBitLength:Sn,doubleToBinaryString:Qt,doubleToOctets:Ht,getHighestSetBit:Jt,getLowestSetBit:Rt,exponent:Zt,significand:jt,orient2d:function(t,n,e){const r=(t[0]-e[0])*(n[1]-e[1]),o=(t[1]-e[1])*(n[0]-e[0]),i=r-o;let s;if(r>0){if(o<=0)return i;s=r+o}else{if(!(r<0))return i;if(o>=0)return i;s=-r-o}return Math.abs(i)>=3330669073875472e-31*s?i:function(t,n,e,r){const o=t[0]-e[0],i=n[0]-e[0],s=t[1]-e[1],u=n[1]-e[1],c=Nn(Qn(o,u),Qn(s,i));let l=un(c);if(Math.abs(l)>=2220446049250315e-31*r)return l;const f=Kn(t[0],e[0])[0],h=Kn(n[0],e[0])[0],a=Kn(t[1],e[1])[0],g=Kn(n[1],e[1])[0];if(0===f&&0===a&&0===h&&0===g)return l;const d=1109335647967049e-46*r+3330669073875471e-31*Math.abs(l);if(l+=o*g+u*f-(s*h+i*a),Math.abs(l)>=d)return l;const p=cn(c,Nn(Qn(f,u),Qn(a,i))),m=cn(p,Nn(Qn(o,g),Qn(s,h)));let b=cn(m,Nn(Qn(f,g),Qn(a,h)));return b=nn(b),b[b.length-1]}(t,n,e,s)},isAdjacent:function(t,n){return se(t,n)||se(t,2*n)||se(2*t,n)},isNonOverlappingAll:function(t){for(let n=1;n<t.length;n++)if(se(t[n-1],t[n]))return!1;return!0},eIsInteger:function(t){t=nn(t);for(let n=0;n<t.length;n++)if(t[n]%1!=0)return!1;return!0}};Number.EPSILON;const le=134217729;Number.EPSILON,Number.EPSILON;const fe=function(t,n){const e=t[0],r=t[1],o=n[0],i=n[1],s=r+i,u=s-r,c=e+o,l=c-e,f=r-(s-u)+(i-u)+c,h=s+f,a=e-(c-l)+(o-l)+(f-(h-s)),g=h+a;return[a-(g-h),g]},he=function(t,n){const e=t[0],r=t[1],o=n[0],i=n[1],s=r-i,u=s-r,c=e-o,l=c-e,f=r-(s-u)+(-i-u)+c,h=s+f,a=e-(c-l)+(-o-l)+(f-(h-s)),g=h+a;return[a-(g-h),g]},ae=Number.EPSILON/2;function ge(t){const n=t*ae;return n/(1-n)}function de(t){const n=t[0][0],e=t[0][1];for(let r=1;r<t.length;r++)if(n!==t[r][0]||e!==t[r][1])return!1;return!0}ge(1);const pe=Nn,me=Kt,be=Tn,{abs:Ne}=Math,Se=Qn,Ae=cn,_e=Kt,we=Nn,Ie=Number.EPSILON/2,ye=Math.abs,{orient2d:ve}=ce;function Te(t){if(4===t.length)return 0===ve(t[0],t[1],t[2])&&0===ve(t[1],t[2],t[3])&&0===ve(t[0],t[2],t[3]);if(3===t.length)return 0===ve(t[0],t[1],t[2]);if(t.length<=2)return!0;throw new Error("The given bezier curve must be of order <= 3.")}const xe=fn,Me=Nn,Ee=Tn,Oe=Kt,Ce=Math.abs;const $e=Math.abs,ze=ge(1),Be=Kn,Fe=Tn,Le=hn,Pe=vn,Ye=ue;const ke=dn,De=cn,Ve=Nn,{eSign:Ue,eCompare:Ke}=ce,He=Nn,Qe=dn,Xe=hn,qe=function(t,n){const e=t-n,r=t-e;return[t-(e+r)+(r-n),e]},je=function(t,n){const e=t+n,r=e-t;return[t-(e-r)+(n-r),e]},Ge=cn,Re=vn,We=Math.abs,Je=ge(1),Ze={order:0,realOrder:0,collinear:!0,nodeType:"n/a"},tr={order:1,realOrder:1,collinear:!0,nodeType:"n/a"},nr={order:1,realOrder:0,collinear:!0,nodeType:"n/a"},er={order:2,realOrder:2,collinear:!1,nodeType:"n/a"},rr={order:2,realOrder:2,collinear:!0,nodeType:"n/a"},or={order:2,realOrder:1,collinear:!0,nodeType:"n/a"},ir={order:2,realOrder:0,collinear:!0,nodeType:"n/a"},sr={order:3,realOrder:3,collinear:!1,nodeType:"crunode"},ur={order:3,realOrder:3,collinear:!1,nodeType:"acnode"},cr={order:3,realOrder:3,collinear:!1,nodeType:"cusp"},lr={order:3,realOrder:3,collinear:!1,nodeType:"explicit"},fr={order:3,realOrder:3,collinear:!0,nodeType:"n/a"},hr={order:3,realOrder:2,collinear:!1,nodeType:"n/a"},ar={order:3,realOrder:2,collinear:!0,nodeType:"n/a"},gr={order:3,realOrder:1,collinear:!0,nodeType:"n/a"},dr={order:3,realOrder:0,collinear:!0,nodeType:"n/a"};function pr(t){if(4===t.length)return function(t){const[[n,e],[r,o],[i,s],[u,c]]=t,l=u+3*r,f=n+3*i,h=l-f,a=ye(3*r)+ye(l)+(ye(3*i)+ye(f))+ye(h);if(ye(h)-Ie*a>0)return!1;const g=c+3*o,d=e+3*s,p=g-d,m=ye(3*o)+ye(g)+(ye(3*s)+ye(d))+ye(p);return!(ye(p)-Ie*m>0)&&0===_e(we(Ae([u],Se(3,r)),Ae([n],Se(3,i))))&&0===_e(we(Ae([c],Se(3,o)),Ae([e],Se(3,s))))}(t)?function(t){if(!Te(t))return!1;const[n,e,r,o]=t,[i,s]=n,[u,c]=e,[l,f]=r,[h,a]=o,g=Me(xe(Ee(u/4,l/4),3),Ee(i/4,h/4)),d=Me(xe(Ee(c/4,f/4),3),Ee(s/4,a/4));return 0===Oe(Me(Ee(i/2,h/2),g))&&0===Oe(Me(Ee(s/2,a/2),d))}(t)?de(t)?dr:gr:Te(t)?ar:hr:Te(t)?fr:function(t){const{coeffs:[n,e,r],errBound:[o,i,s]}=function(t){const{coeffs:[[n,e,r],[o,i,s]],errorBound:[[u,c],[l,f]]}=function(t){const[[n,e],[r,o],[i,s],[u,c]]=t,l=u-n,f=r-i,h=l+3*f,a=i+n,g=a-2*r,d=r-n,p=c-e,m=o-s,b=p+3*m,N=s+e,S=N-2*o,A=o-e;return{coeffs:[[h,3*g,3*d,n],[b,3*S,3*A,e]],errorBound:[[Ce(l)+6*Ce(f)+Ce(h),6*(Ce(a)+Ce(g)),6*Ce(d),0],[Ce(p)+6*Ce(m)+Ce(b),6*(Ce(N)+Ce(S)),6*Ce(A),0]]}}(t),h=$e(n),a=$e(e),g=$e(r),d=$e(o),p=$e(i),m=$e(s),b=e*o,N=n*i,S=n*s,A=r*o,_=e*s,w=r*i,I=c*d+a*l+$e(b),y=u*p+h*f+$e(N),v=u*m+$e(S),T=g*l+$e(A),x=c*m+$e(_),M=g*f+$e(w),E=b-N,O=$e(E),C=I+y+O,$=A-S,z=$e($),B=T+v+z,F=_-w,L=$e(F),P=x+M+L,Y=E*E,k=E*$,D=F*E,V=$*$,U=D+V;return{coeffs:[Y,k,U],errBound:[2*C*O+$e(Y),C*z+O*B+$e(k),P*O+L*C+$e(D)+(2*z*B+$e(V))+$e(U)].map((t=>ze*t))}}(t);if(We(n)<=o){const[[n,e],[r,o],[i,s],[u,c]]=t,l=Ge(qe(u,n),Xe(3,qe(r,i))),f=Re(je(i,n),-2*r),h=Ge(qe(c,e),Xe(3,qe(o,s))),a=Re(je(s,e),-2*o),g=Qe(f,h),d=Qe(l,a);if(0===Ke(g,d))return lr}const u=e*e,c=4*n*r,l=u-c,f=2*i*We(e)+Je*u+(4*(o*We(r)+We(n)*s)+Je*We(c))+Je*We(l);if(l<-f)return ur;if(l>f)return sr;const[h,a,g]=function(t){const[[n,e,r],[o,i,s]]=function(t){const[[n,e],[r,o],[i,s],[u,c]]=t;return[[Ye(Be(u,n),Le(3,Be(r,i))),Le(3,Pe(Fe(i,n),-2*r)),Le(3,Be(r,n)),[n]],[Ye(Be(c,e),Le(3,Be(o,s))),Le(3,Pe(Fe(s,e),-2*o)),Le(3,Be(o,e)),[e]]]}(t),u=ke(e,o),c=ke(n,i),l=ke(n,s),f=ke(r,o),h=ke(e,s),a=ke(r,i),g=Ve(u,c),d=Ve(f,l),p=Ve(h,a),m=ke(g,g),b=ke(g,d),N=ke(g,p),S=ke(d,d);return[m,b,De(N,S)]}(t),d=He(Qe(a,a),Xe(4,Qe(h,g))),p=Ue(d);return p<0?ur:p>0?sr:cr}(t);if(3===t.length)return Te(t)?function(t){const[[n,e],[r,o],[i,s]]=t,u=n+i,c=u-2*r,l=Ne(u)+Ne(c);if(Ne(c)-l>0)return!1;const f=e+s,h=f-2*o,a=Ne(f)+Ne(h);return!(Ne(h)-a>0)&&0===me(pe(be(n,i),[2*r]))&&0===me(pe(be(e,s),[2*o]))}(t)?de(t)?ir:or:rr:er;if(2===t.length)return de(t)?nr:tr;if(1===t.length)return Ze;throw new Error("The given bezier curve must be of order <= 3")}const mr=function(t,n){const e=t*n,r=le*t,o=r-(r-t),i=t-o,s=le*n,u=s-(s-n),c=n-u;return[i*c-(e-o*u-i*u-o*c),e]},br=fe,Nr=he,{atan2:Sr}=Math;function Ar(t,n){const e=t[0],r=t[1],o=n[0],i=n[1],s=Nr(mr(i,e),mr(o,r))[1],u=br(mr(o,e),mr(i,r))[1];return Sr(s,u)}const{abs:_r}=Math;function wr(t){const n=[];for(let e=0;e<t.length-1;e++){const r=[t[e+1][0]-t[e][0],t[e+1][1]-t[e][1]];0!==(0!==r[0]||r[1])&&n.push(r)}const e=n.length;let r=0;for(let t=0;t<e-1;t++)r+=_r(Ar(n[t],n[t+1]));return r}function Ir(t,n,e){if(4===t.length)return function(t,n,e){return 0===n?1===e?t:function(t,n){const e=t[0],r=t[1],o=t[2],i=t[3],s=e[0],u=e[1],c=r[0],l=r[1],f=o[0],h=o[1],a=s-n*(s-c),g=c-n*(c-f),d=a-n*(a-g),p=u-n*(u-l),m=l-n*(l-h),b=p-n*(p-m);return[[s,u],[a,p],[d,b],[d-n*(d-(g-n*(g-(f-n*(f-i[0]))))),b-n*(b-(m-n*(m-(h-n*(h-i[1])))))]]}(t,e):1===e?function(t,n){const e=t[0],r=t[1],o=t[2],i=t[3],s=e[0],u=e[1],c=r[0],l=r[1],f=o[0],h=o[1],a=i[0],g=i[1],d=s-n*(s-c),p=c-n*(c-f),m=f-n*(f-a),b=d-n*(d-p),N=p-n*(p-m),S=u-n*(u-l),A=l-n*(l-h),_=h-n*(h-g),w=S-n*(S-A),I=A-n*(A-_);return[[b-n*(b-N),w-n*(w-I)],[N,I],[m,_],[a,g]]}(t,n):function(t,n,e){const r=t[0],o=t[1],i=t[2],s=t[3],u=r[0],c=r[1],l=o[0],f=o[1],h=i[0],a=i[1],g=n*n,d=n*g,p=e*e,m=e*p,b=n*e,N=u-l,S=h-l,A=N+S,_=n*N,w=e*N,I=s[0]-u-3*S,y=c-f,v=a-f,T=y+v,x=n*y,M=e*y,E=s[1]-c-3*v;return[[d*I+(3*n*(n*A-N)+u),d*E+(3*n*(n*T-y)+c)],[b*(n*I+2*A)+(g*A+u-(w+2*_)),b*(n*E+2*T)+(g*T+c-(M+2*x))],[b*(e*I+2*A)+(p*A+u-(2*w+_)),b*(e*E+2*T)+(p*T+c-(2*M+x))],[m*I+(3*e*(e*A-N)+u),m*E+(3*e*(e*T-y)+c)]]}(t,n,e)}(t,n,e);if(3===t.length)return function(t,n,e){return 0===n?1===e?t:function(t,n){const e=t[0],r=t[1],o=t[2],i=e[0],s=e[1],u=r[0],c=r[1],l=n*n,f=i-u,h=s-c;return[[i,s],[-n*f+i,-n*h+s],[l*(f+(o[0]-u))-(2*n*f-i),l*(h+(o[1]-c))-(2*n*h-s)]]}(t,e):1===e?function(t,n){const e=t[0],r=t[1],o=t[2],i=e[0],s=e[1],u=r[0],c=r[1],l=o[0],f=o[1],h=n*n,a=i-u,g=l-u,d=s-c,p=f-c;return[[h*(a+g)-(2*n*a-i),h*(d+p)-(2*n*d-s)],[n*g+u,n*p+c],[l,f]]}(t,n):function(t,n,e){const r=t[0],o=t[1],i=t[2],s=r[0],u=r[1],c=o[0],l=o[1],f=n*n,h=e*e,a=n*e,g=s-c,d=g+(i[0]-c),p=u-l,m=p+(i[1]-l);return[[f*d-(2*n*g-s),f*m-(2*n*p-u)],[a*d-(g*(e+n)-s),a*m-(p*(e+n)-u)],[h*d-(2*e*g-s),h*m-(2*e*p-u)]]}(t,n,e)}(t,n,e);if(2===t.length)return function(t,n,e){return 0===n?1===e?t:function(t,n){const e=t[0],r=t[1],o=e[0],i=e[1];return[[o,i],[n*(r[0]-o)+o,n*(r[1]-i)+i]]}(t,e):1===e?function(t,n){const e=t[0],r=t[1],o=e[0],i=e[1],s=r[0],u=r[1];return[[n*(s-o)+o,n*(u-i)+i],[s,u]]}(t,n):function(t,n,e){const r=t[0],o=t[1],i=r[0],s=r[1],u=o[0],c=o[1];return[[n*(u-i)+i,n*(c-s)+s],[e*(u-i)+i,e*(c-s)+s]]}(t,n,e)}(t,n,e);if(1===t.length)return t;throw new Error("The given bezier curve must be of order <= 3.")}function yr(t){return function(t){for(let n=1;n<t.length;n++)if(t[n-1]>t[n])return!1;return!0}(t)||function(t){for(let n=1;n<t.length;n++)if(t[n-1]<t[n])return!1;return!0}(t)}const{sqrt:vr}=Math;function Tr(t,n=1.125,e=4){const r=pr(t);return r.collinear?function(t){if(!Te(t))return!1;const n=t.map((t=>t[0])),e=t.map((t=>t[1]));return!(yr(n)&&yr(e))}(t)?Number.POSITIVE_INFINITY:0:3===r.realOrder?"cusp"===r.nodeType?Number.POSITIVE_INFINITY:xr(Mr,t,n,e):2===r.realOrder?xr(Er,t,n,e):0}function xr(t,n,e,r){const o=function(t,n=.4,e=2**-16){const r={r:[0,1]};let o=r;for(;void 0!==o;){const r=o.r;if(wr(Ir(t,r[0],r[1]))<=n||r[1]-r[0]<=e){o=o.next;continue}const i=(r[0]+r[1])/2,s=[r[0],i],u=[i,r[1]];o.r=s,o.next={r:u,next:o.next}}o=r;const i=[];for(;void 0!==o;)i.push(o.r[0]),void 0===o.next&&i.push(o.r[1]),o=o.next;return i}(n,e);let i=0;for(let e=0;e<o.length-1;e++)i+=Vt(t(Ir(n,o[e],o[e+1])),[0,1],r);return i}function Mr(t){const n=t[0],e=t[1],r=t[2],o=t[3],i=n[0],s=n[1],u=e[0],c=e[1],l=r[0],f=r[1],h=o[0],a=o[1],g=h-i+3*(u-l),d=a-s+3*(c-f),p=l+i-2*u,m=f+s-2*c;return t=>{const n=t*t,e=n*g+2*t*p+(u-i),r=n*d+2*t*m+(c-s),o=e*(t*d+m)-r*(t*g+p),l=e*e+r*r;return 4/3*o*o/(l*l*vr(l))}}function Er(t){const n=t[0],e=t[1],r=t[2],o=n[0],i=n[1],s=e[0],u=e[1],c=r[0],l=r[1],f=c-2*s+o,h=l-2*u+i;return t=>{const n=f*t+(s-o),e=h*t+(u-i),r=n*h-e*f,c=n*n+e*e;return.5*r*r/(c*c*vr(c))}}const{cos:Or,sin:Cr}=Math;function $r(t){const{α:n,β:e,s0:r,s1:o,L:i,rot:s,p:u}=t;return function(t){const n=t[0].length;if(4===n){const[[n,e,r,o],[i,s,u,c]]=t;return[[o,c],[o+r/3,c+u/3],[o+2*r/3+e/3,c+2*u/3+s/3],[o+r+e+n,c+u+s+i]]}if(3===n){const[[n,e,r],[o,i,s]]=t;return[[r,s],[r+e/2,s+i/2],[r+e+n,s+i+o]]}if(2===n){const[[n,e],[r,o]]=t;return[[e,o],[e+n,o+r]]}if(1===n){const[[n],[e]]=t;return[[n,e]]}throw new Error("The given bezier curve must be of order <= 3.")}([[i*(r*Or(n)-2+o*Or(e)),i*(3-2*r*Or(n)-o*Or(e)),i*(r*Or(n)),0*i],[i*(r*Cr(n)+o*Cr(e)),i*(-2*r*Cr(n)-o*Cr(e)),i*(r*Cr(n)),0*i]]).map(Lt(Cr(s),Or(s))).map(nt(u))}function zr(t){return n=>{const[e,r]=Br(n,t);return Tr(r)+Tr(e)}}function Br(t,n){const{ϕ:e}=n,r=n._info,o=r.$ps,i=n.$ps,s=$r({...o,β:t-e,s0:1,s1:1}),u=$r({...i,α:t,s0:1,s1:1});{const t=r.ps,e=n.ps;return[[t[0],s[1],s[2],t[3]],[e[0],u[1],u[2],e[3]]]}}const{PI:Fr}=Math,Lr=Fr,Pr=.0625,[Yr,kr]=[1,1],{min:Dr,max:Vr,PI:Ur,atan2:Kr,sin:Hr,cos:Qr}=Math;function Xr(t,n){return e=>{const r=3*e;return[t[n[r+0]],t[n[r+1]],t[n[r+2]]]}}const qr=function(t,n){const e=n.length/3,r=Xr(t,n),o=[];for(let t=0;t<e;t++){const n=r(t);o.push(n)}return o};function jr(t){const n=new y(t.flat(1)),e=$(n).map((n=>t[n])),r=function(t){const n=function(t){const n=t.length,e=[];for(let t=0;t<n;t++)e.push({});for(let i=0;i<n;i++){const s=(i-1+n)%n,u=(i+1)%n,c=e[s],l=e[i],f=e[u];l._info=c,l.info_=f;const h=t[s],a=t[i],g=t[u],d=(o=g,-Ar(Z(h,r=a),Z(r,o)));l.ϕ=d;const p=[Vr(-Lr,d-Lr),Dr(+Lr,d+Lr)];l.range=p;const m=nt(gt(a))(g),[b,N]=[m[0],m[1]],S=Kr(N,b),A=Lt(Hr(-S),Qr(-S))(m)[0];l.L=A,l.rot=S,l.p=a}var r,o;for(let t=0;t<n;t++){const n=e[t],{ϕ:r,info_:o,p:i,L:s,rot:u}=n,c=r/2,l={α:c,β:-o.ϕ/2,p:i,L:s,rot:u,s0:Yr,s1:kr},f=$r(l);n.ps=[i,f[1],f[2],o.p],n.$ps=l,n.l=c-Ur*Pr,n.m=c,n.r=c+Ur*Pr}return e}(t),e=n.length;for(let t=0;t<4;t++)for(let t=0;t<e;t++){const e=n[t],r=e._info,o=zr(e);let i,{l:s,m:u,r:c}=e,l=o(s),f=o(u),h=o(c);for(;;){if(({l:s,m:u,r:c}=e),i=(c-s)/2,l>=f&&f<=h){e.l=u-i/2,e.r=u+i/2;break}l<=f&&f<=h?(e.l=s-i,e.m=s,e.r=u,h=f,f=l,l=o(e.l)):l>=f&&f>=h?(e.l=u,e.m=c,e.r=c+i,l=f,f=h,h=o(e.r)):l<=f&&f>=h&&(e.l=s-i,e.m=s,e.r=u,h=f,f=l,l=o(e.l))}const a=e.m,[g,d]=Br(a,e);e.ps=d,e.$ps=Dt(d),r.ps=g,r.$ps=Dt(g)}return n.map((t=>t.ps))}(e);return"undefined"!=typeof _debug_&&function(t,n,e,r){const o=qr(n,r.triangles),{generated:i}=_debug_,{elems:s}=i;_debug_.generated.elems={...s,point:n,polygon:[e],cubics:[t],triangles:[o]}}(r,t,e,n),r}function Gr(t,n,e=1){const r=function(t,n){const e=[];let r=0;for(let o=t=W(s(t)/2);o<n+t;o++){let t,n;for(;t=s(2*(o+r)+0)/2**31-1,n=s(2*(o+r)+1)/2**31-1,r++,!(t*t+n*n<1););e.push([t,n])}return e}(t,n);let o=jr(r);return o=et(e,o),o=dt(o),o=Ft(1,o),o}const{sin:Rr,cos:Wr}=Math;function Jr(t,n){const e=Rr(t),r=Wr(t);return n.map((t=>t.map(Lt(e,r))))}var Zr=n.ty,to=n.ge,no=n.fY,eo=n.mR,ro=n.iC,oo=n.mE,io=n.cV,so=n.tp;export{Zr as enableDebugForRandomShape,to as generateRandomShape,no as moveShapeCentroidToOrigin,eo as pointsToShape,ro as pointsToSimplePolygon,oo as setShapeRotation,io as setShapeSize,so as setShapeSmoothness};